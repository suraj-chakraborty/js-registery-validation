<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width" initiL-Scale="0.1">
	<title></title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" integrity="sha512-PgQMlq+nqFLV4ylk1gwUOgm6CtIIXkKwaIHp/PAIWHzig/lKZSEGKEysh0TCVbHJXCLN7WetD8TFecIky75ZfQ==" crossorigin="anonymous" >
	<link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
<div class="container">
	<div class="header">
		<h2>REGISTERATION FORM</h2>
	</div>
	<form class="form" id="form">
		<div class="form-control">
			<label>Username</label>
			<input type="text" name="" id="username" placeholder="Enter your name" autocomplete="off">
			<i class="fas fa-check-circle"></i>
			<i class="fas fa-exclamation-circle"></i>
			<small>Error Msg</small>
		</div>
		<div class="form-control">
			<label>Email</label>
			<input type="Email" name="" id="email" placeholder="Enter your email" autocomplete="off">
			<i class="fas fa-check-circle"></i>
			<i class="fas fa-exclamation-circle"></i>
			<small>Error Msg</small>
		</div>
		<div class="form-control">
			<label>Phone Number</label>
			<input type="number" name="" id="phone" placeholder="Enter your PhoneNumber" autocomplete="off">
			<i class="fas fa-check-circle"></i>
			<i class="fas fa-exclamation-circle"></i>
			<small>Error Msg</small>
		</div>
		<div class="form-control">
			<label>Password</label>
			<input type="text" name="" id="password" placeholder="Enter your Password">
			<i class="fas fa-check-circle"></i>
			<i class="fas fa-exclamation-circle"></i>
			<small>Error Msg</small>
		</div>
		<div class="form-control">
			<label>Conform Password</label>
			<input type="text" name="" id="cpassword" placeholder="ConformPassword">
			<i class="fas fa-check-circle"></i>
			<i class="fas fa-exclamation-circle"></i>
			<small>Error Msg</small>
		</div>

		<input type="submit" value="Submit" class="btn" name="">
	
	</form>
</div>

<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script type="text/javascript">
	const form = document.getElementById('form');
	const username = document.getElementById('username');
	const email = document.getElementById('email');
	const phone = document.getElementById('phone');
	const password = document.getElementById('password');
	const cpassword = document.getElementById('cpassword');

	form.addEventListener('submit', (event) => {
		event.preventDefault();
		validate();
	})


	const sendData = (usernameVal, sRate, count) => {
		if (sRate === count) {
			alert('REGISTERATION successful');
			swal("Welcome! " + username, "registration successful", "success");
			location.href = `demo.html?username=${username}`
		}
	}



	const successMsg = (usernameVal) => {
		let formCon = document.getElementsByClassName('form-control');
		var count = formCon.length - 1;
		for(var i = 0; i < formCon.length; i++){
			if(formCon[i].className === "form-control success"){
				var sRate = 0 + i;
				console.log(sRate);
				sendData(usernameVal, sRate, count);

			}
			else {
				return false;
			}
		}
	}


	const isEmail = (emailVal) => {
		var atSymbol = emailVal.indexOf("@");
		if(atSymbol < 1) return false;
		var dot = emailVal.lastIndexOf('.');
		if(dot <= atSymbol + 3) return false;
		if(dot === emailVal.length - 1) return false;
		return true;
	}

	const validate = () => {
		const usernameVal = username.value.trim();
		const emailVal = email.value.trim();
		const phoneVal = phone.value.trim();
		const passwordVal = password.value.trim();
		const cpasswordVal = cpassword.value.trim();

			if(usernameVal === ""){
				setErrorMsg(username, 'username cannot be blank');
			}
			else if(usernameVal.length <= 5)
			{
				setErrorMsg(username, 'username must be more than 5 character');
			}
			else
			{
				setSuccessMsg(username);
			}

				if(emailVal === "")
			{
				setErrorMsg(email, 'email cannot be blank');
			}
			else if(!isEmail(emailVal))
			{
				setErrorMsg(email, 'enter a valid email');
			}
			else
			{
				setSuccessMsg(email);
			}


				if (phoneVal === ""){
				setErrorMsg(phone, 'Phone Number cannot be blank');
			}
			else if (phoneVal.length != 10)
			{
				setErrorMsg(phone, 'invalid Phone Number');
			}
			else
			{
				setSuccessMsg(phone);
			}
		
			if(passwordVal === ""){
				setErrorMsg(password, 'password cannot be blank');
			}
			else if(passwordVal.length <= 6)
			{
				setErrorMsg(password, 'INVALID PASSWORD');
			}
			else
			{
				setSuccessMsg(password);
			}

			if(cpasswordVal === ""){
				setErrorMsg(cpassword, 'password cannot be blank');
			}
			else if(passwordVal != cpasswordVal)
			{
				setErrorMsg(cpassword, 'Passwords Don\'t Match');
			}
			else
			{
				setSuccessMsg(cpassword);
			}



			successMsg(username);
		}

	function setErrorMsg(input, errormsgs) {
		const formControl = input.parentElement;
		const small = formControl.querySelector('small');
		formControl.className= "form-control error";
		small.innerText = errormsgs;
	}
	function setSuccessMsg(input){
		const formControl = input.parentElement;
		formControl.className= "form-control success";
	}
</script>

</body>
</html>